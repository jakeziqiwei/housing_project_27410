---
title: "STAT 27410 Final Project Proposal"
author: "Bridgette Kon and Jake Wei"
fontsize: 12pt
bibliography: references.bib
output:
  pdf_document: default
  html_document:
    df_print: paged
  word_document: default
  geometry: margin=0.75in
fig_crop: no
---

```{r echo=FALSE, message=FALSE}
library(knitr)
library(tidyverse)
library(ggplot2)
library(dplyr)
library(ggcorrplot)

knitr::opts_chunk$set(fig.width=4, fig.height=3, message=F, warning=F)
options(scipen=6, digits=6)
```

# 1. Introduction

AirBnb has become one of the most popular choices for people traveling and seeking housing. However, one problem exist. It is difficult for owners to come up with prices given the location and amenity. It is also hard to predict prices given seasons. Different features such as host ratings, season, location, number of bed rooms makes these two questions immensely complex. In this project, we try to provide insight into predicting prices given different neighborhood in the New York. The data set we picked comes from Inside Airbnb, which is a organization that periodically scrapes data from airbnb listing. There are 12 columns in the data set. Four are descriptions of the host and 10 can serve as explanatory variables. The explanatory variables are: host id, host name, neighbourhood, latitude, longitude, room_type, accommodates, bed, price, minimum nights, number of reviews. The response variable is the rent price. 


# 2. Exploratory Data Cleaning and Data Analysis

```{r}

data <- read.csv('nydata.csv')

numerical_features <- data[3:9]
categorical_features <- data[10:11]
price <- data$price
summary(price)

```

```{r}
summary(numerical_features)

features <- c("latitude", "longitude", "accommodates", "beds", "minimum_nights", "number_of_reviews", "review_scores_rating")


for (i in 1:ncol(numerical_features)) {
  p <- ggplot(numerical_features, aes(x = numerical_features[[i]])) +
    geom_density(fill = "skyblue", color = "black") +
    labs(title = paste("Density Plot of Feature", features[i]), x = features[i], y = "Density") +
    theme_minimal()
  
  plot(p)  # Print each plot
}

```

From this initial data ploting, we realized that there data points that don't make sense. Some of the variables are poorly distributed For example the max price of 10000. In the next step, we will attempt to remove these outliers. Judging from IQR of each variables, we can see that majority of airbnbs in New York is below $500 and less than 30 nights. We will create a new dataframe from this. 

```{r}

#clean data
data_clean = subset(data,price <= 500 & minimum_nights <= 30)
numerical_features_clean <- data_clean[3:9]
categorical_features_clean <- data_clean[10:11]
price_clean <- data_clean$price

summary(price_clean)
summary(numerical_features_clean)



```

```{r}

#graph again 

for (i in 1:ncol(numerical_features_clean)) {
  p <- ggplot(numerical_features_clean, aes(x = numerical_features_clean[[i]])) +
    geom_density(fill = "skyblue", color = "black") +
    labs(title = paste("Density Plot of Feature", features[i]), x = features[i], y = "Density") +
    theme_minimal()
  
  print(p)  # Print each plot
}

plot(price_clean)
```

For the features now, it seems a lot more realistic after we removed outliers.


```{r}
pairs(numerical_features_clean)
cor_matrix <- cor(numerical_features_clean)
cor_matrix
ggcorrplot(cor_matrix)

```
we check for correlation between the variables. There seem to be relationship between number of reviews and minimum nights but because the correlation doesn't seem be a strong one. 


```{r}
#graphs with the categorical features 


ggplot(categorical_features_clean, aes(x = categorical_features_clean$room_type)) +
  geom_bar(stat = "count", fill = "skyblue", color = "black") +
  labs(title = "Count Plot", x = "Category", y = "Count") +
  theme_minimal()

neighborhood_Price <- data_clean[11:12]
summary_price <- neighborhood_Price %>%
  group_by(neighbourhood_cleansed) %>%
  summarise(mean_price = mean(price),
            median_price = median(price),
            min_price = min(price),
            max_price = max(price),
            total_listings = n())

summary_price

```




# 3. Frequentist Analysis

Perform the frequentist analysis in this session.

## 3.1 Proposed Frequentist Model(s)

In this section, formulate the frequentist model(s) you are going to use to analyze your dataset. Be sure to first define the notations involved in the model(s).

## 3.2 Fitting the Frequentist Model(s)

In this section, 
* discuss how you fit the proposed frequentist model(s).
* report the results.
* interpret the results in the context.

# 4. Bayesian Analysis

Propose the Bayesian analysis you will work on during the rest of the quarter in this session.

## 4.1 Proposed Bayesian Model(s)

In this section, 

* formulate the Bayesian model(s) you are going to use to analyze your dataset. Be sure to first define the notations involved in the model(s).
* discuss how you will elicit the prior(s).

## 4.2 Fitting the Bayesian model(s)

* Propose how you will fit the proposed Bayesian models.

* Propose how you will perform sensitivity analysis of the Bayesian models, i.e., how the posterior distribution is affected by the prior 

* Propose how you will check the MCMC convergence. 

## 4.3 Prediction

In this section, propose how you can make predictions using the Bayesian model. 

# 5. Discussion

In this section, discuss how you can improve your model.

# 6. Contributions

In this section, discuss the percentage of your contributions to the development final project proposal. Report the number of hours you have worked on the proposal, and the sections you are involved.

Please also discuss briefly the contributions of your teammate(s), as well as the help and support you got from your teammates(s).

# References
<div id="refs"></div>

# Appendix

You can delegate detailed math derivations and/or sketch of algorithms and/or code in this section. 
